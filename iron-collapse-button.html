<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../shadycss/apply-shim.html">
<!--
`iron-collapse-button`
An iron-collapse container that works similarly to paper-menu-button. There is a trigger section and a collapsible section.

@demo demo/index.html
-->
<dom-module id="iron-collapse-button">
  <template>
    <style>
      :host {
        display: block;
      }
      #trigger {
        @apply --layout-horizontal;
        @apply --layout-center;
      }
    </style>

    <div id="trigger" on-tap="toggle">
      <slot name="collapse-trigger"></slot>
      <iron-icon icon="[[_getIcon(opened, expandIcon, collapseIcon)]]" hidden$="[[noIcons]]"></iron-icon>
    </div>
    <iron-collapse id="collapse" horizontal$="[[horizontal]]" no-animation$="[[noAnimation]]" opened="[[opened]]">
      <slot name="collapse-content"></slot>
    </iron-collapse>
  </template>

  <script>
  class IronCollapseButton extends Polymer.GestureEventListeners(Polymer.Element) {

    static get is() { return 'iron-collapse-button'; }

    static get properties() {
      return {
        horizontal: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        noAnimation: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        opened: {
          type: Boolean,
          value: false,
          reflectToAttribute: true,
          notify: true
        },
        expandIcon: {
          type: String,
          value: 'expand-more'
        },
        collapseIcon: {
          type: String,
          value: 'expand-less'
        },
        noIcons: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
      };
    }

    static get observers() {
      return [

      ];
    }
    hide() {
      this.opened = false;
    }

    show() {
      this.opened = true;
    }

    toggle() {
      console.log('toggling')
      this.opened = !this.opened;
    }

    _getIcon(opened, expandIcon, collapseIcon) {
      return opened ? collapseIcon : expandIcon;
    }
  }

  window.customElements.define(IronCollapseButton.is, IronCollapseButton);
  </script>
</dom-module>
